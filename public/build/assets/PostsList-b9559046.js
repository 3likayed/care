import{A as T,e as V,o as i,I as b,J as s,V as o,M as e,B as O,Q as S,Y as j,a as f,c as E,L as P,K as w,Z as L,g as F,P as x,O as M}from"./@vue-588772e2.js";import{_ as I,a as J,b as K}from"./ActionConfirmComponent-07d26409.js";import{_ as g}from"./FormField-dc7910ae.js";import{g as a,_ as y,o as R}from"./app-90a7b2da.js";import{Q as B,T as N,O as D}from"./@inertiajs-27eca87a.js";import{_ as k}from"./FormWithLabelField-e8758755.js";import{_ as H}from"./StepsComponent-41615805.js";import{_ as Q,a as Y}from"./ShowMediaComponent-a404520c.js";import{_ as Z}from"./TableOptions-5b065721.js";import{_ as z}from"./CardBox-62d8fdfd.js";import{_ as G}from"./sortablejs-vue3-78a6c49c.js";const $e={__name:"CreatePost",props:{section:Object},setup(v){const _=v;let c=B().props.locales,u=T("showCreatePost"),l=N({title:{},content:{},priority:null,link:{},image:null,section_id:_.section.id}),C=V([a("main_data"),a("media")]),d=V(0);function h(){l.post(route("dashboard.posts.store"),{preserveScroll:!0,preserveState:U=>Object.keys(U.props.errors).length,onSuccess:()=>{u.value=!1}})}return(U,n)=>(i(),b(I,{"button-label":e(a)("create"),"has-cancel":!0,hasErrors:e(l).hasErrors,"is-form":!0,"model-value":e(u),title:e(a)("create_field",{field:"post"}),onCancel:n[3]||(n[3]=t=>O(u)?u.value=!1:u=!1),onConfirm:h},{default:s(()=>[o(H,{modelValue:e(d),"onUpdate:modelValue":n[0]||(n[0]=t=>O(d)?d.value=t:d=t),steps:e(C)},null,8,["modelValue","steps"]),S(f("section",null,[o(k,{label:e(a)("title")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`title.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).title[t],"onUpdate:modelValue":m=>e(l).title[t]=m,autocomplete:`title[${t}]`,name:`title[${t}]`,required:""},null,8,["modelValue","onUpdate:modelValue","autocomplete","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{cols:{lg:1},label:e(a)("content")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`content.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).content[t],"onUpdate:modelValue":m=>e(l).content[t]=m,autocomplete:`content[${t}]`,dir:t==="ar"?"rtl":"ltr",name:`content[${t}]`,required:"",type:"editor"},null,8,["modelValue","onUpdate:modelValue","autocomplete","dir","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{label:e(a)("link")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`link.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).link[t],"onUpdate:modelValue":m=>e(l).link[t]=m,autocomplete:`link[${t}]`,name:`link[${t}]`,required:""},null,8,["modelValue","onUpdate:modelValue","autocomplete","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{cols:{lg:1},label:e(a)("priority")},{default:s(()=>[o(g,{errors:e(l).errors.priority},{default:s(()=>[o(y,{modelValue:e(l).priority,"onUpdate:modelValue":n[1]||(n[1]=t=>e(l).priority=t),autocomplete:"priority",name:"priority",required:"",type:"number"},null,8,["modelValue"])]),_:1},8,["errors"])]),_:1},8,["label"])],512),[[j,e(d)===0]]),S(f("section",null,[o(Q,{modelValue:e(l).image,"onUpdate:modelValue":n[2]||(n[2]=t=>e(l).image=t),name:"image"},null,8,["modelValue"])],512),[[j,e(d)===1]])]),_:1},8,["button-label","hasErrors","model-value","title"]))}},W={__name:"EditPost",props:{post:Object,isModal:{type:Boolean,default:!1}},setup(v){const _=v;let c=B().props.locales,u=_.isModal?T("showEditPost"):V(!0),l=N({title:_.post.translations.title,content:_.post.translations.content,priority:_.post.priority,link:R(_.post.translations.link),section_id:_.post.section.id,image:null,_method:"put"}),C=V([a("main_data"),a("media")]),d=V(0);function h(){l.post(route("dashboard.posts.update",_.post.id),{preserveScroll:!0,preserveState:U=>Object.keys(U.props.errors).length})}return(U,n)=>(i(),b(I,{"button-label":e(a)("edit"),"has-cancel":!0,hasErrors:e(l).hasErrors,"is-form":!0,"is-modal":v.isModal,"model-value":e(u),title:e(a)("edit_field",{field:"post"}),onCancel:n[3]||(n[3]=t=>O(u)?u.value=!1:u=!1),onConfirm:h},{default:s(()=>[o(H,{modelValue:e(d),"onUpdate:modelValue":n[0]||(n[0]=t=>O(d)?d.value=t:d=t),steps:e(C)},null,8,["modelValue","steps"]),S(f("section",null,[o(k,{label:e(a)("title")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`title.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).title[t],"onUpdate:modelValue":m=>e(l).title[t]=m,autocomplete:`title[${t}]`,name:`title[${t}]`,required:""},null,8,["modelValue","onUpdate:modelValue","autocomplete","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{cols:{lg:1},label:e(a)("content")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`content.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).content[t],"onUpdate:modelValue":m=>e(l).content[t]=m,autocomplete:`content[${t}]`,dir:t==="ar"?"rtl":"ltr",name:`content[${t}]`,required:"",type:"editor"},null,8,["modelValue","onUpdate:modelValue","autocomplete","dir","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{label:e(a)("link")},{default:s(()=>[(i(!0),E(w,null,P(e(c),t=>(i(),b(g,{errors:e(l).errors[`link.${t}`],label:e(a)(t)},{default:s(()=>[o(y,{modelValue:e(l).link[t],"onUpdate:modelValue":m=>e(l).link[t]=m,autocomplete:`link[${t}]`,name:`link[${t}]`,required:""},null,8,["modelValue","onUpdate:modelValue","autocomplete","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),o(k,{cols:{lg:1},label:e(a)("priority")},{default:s(()=>[o(g,{errors:e(l).errors.priority},{default:s(()=>[o(y,{modelValue:e(l).priority,"onUpdate:modelValue":n[1]||(n[1]=t=>e(l).priority=t),autocomplete:"priority",name:"priority",required:"",type:"number"},null,8,["modelValue"])]),_:1},8,["errors"])]),_:1},8,["label"])],512),[[j,e(d)===0]]),S(f("section",null,[o(Y,{items:v.post.image},{default:s(()=>[o(Q,{modelValue:e(l).image,"onUpdate:modelValue":n[2]||(n[2]=t=>e(l).image=t),name:"image"},null,8,["modelValue"])]),_:1},8,["items"])],512),[[j,e(d)===1]])]),_:1},8,["button-label","hasErrors","is-modal","model-value","title"]))}},X={class:"rtl:flex-row-reverse",draggable:"true"},ee={"data-label":"#"},te=["data-label"],le=["data-label","innerHTML"],oe={class:"flex"},re=["alt","src"],ae=["data-label"],se=["data-label"],ge={__name:"PostsList",props:{posts:Object},setup(v){const _=v;let c=V(!1),u=V(!1),l=V({}),C=V(null);L("showEditPost",c),L("actionConfirm",u);let d=_.posts.map((r,$)=>({id:r.id,title:r.title,content:r.content,section_id:r.section_id,image:{url:r.image.url},created_at:r.created_at})),h=F(d);B().props.locales;function U(r){l.value=_.posts.find($=>$.id===r.id),c.value=!0}function n(r){u.value=!0,C=r.id}function t(){D.delete(route("dashboard.posts.destroy",C),{preserveState:r=>Object.keys(r.props.errors).length,preserveScroll:!0})}function m(r,$,p){if($!==p){const q=r.splice($,1)[0];r.splice(p,0,q),D.post(route("dashboard.posts.sort"),{posts:r},{preserveState:!0})}}return(r,$)=>(i(),E(w,null,[o(z,{"has-table":""},{default:s(()=>[o(J,{headers:["#",r.__("title"),r.__("content"),r.__("the_image"),r.__("created_at")],"is-draggable":""},{default:s(()=>[Object.keys(e(h)).length?(i(),b(e(G),{key:0,list:e(h),class:"rtl:flex-row-reverse","item-key":"id",tag:"tbody",onEnd:$[0]||($[0]=p=>m(e(h),p.oldIndex,p.newIndex))},{item:s(({element:p,index:q})=>[f("tr",X,[f("td",ee,x(q+1),1),f("td",{"data-label":r.__("title")},x(p.title),9,te),f("td",{"data-label":r.__("content"),class:"prose bg-stone-50 text-start ps-2",innerHTML:p.content},null,8,le),f("td",oe,[f("img",{alt:p.title,src:p.image.url,class:"max-w-[200px] mx-auto"},null,8,re)]),f("td",{"data-label":r.__("created_at")},x(p.created_at),9,ae),f("td",{"data-label":r.__("options")},[o(Z,{"has-show":!1,model:"posts",onDestroy:A=>n(p),onEdit:A=>U(p)},null,8,["onDestroy","onEdit"])],8,se)])]),_:1},8,["list"])):M("",!0)]),_:1},8,["headers"])]),_:1}),e(c)?(i(),b(W,{key:0,post:e(l),"is-modal":""},null,8,["post"])):M("",!0),o(K,{onConfirm:t})],64))}};export{ge as _,$e as a};
