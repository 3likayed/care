import{_ as H}from"./TableOptions-5b065721.js";import{a as Q,b as A,_ as F}from"./ActionConfirmComponent-07d26409.js";import{_ as J}from"./CardBox-62d8fdfd.js";import{Q as j,O as C,T as K}from"./@inertiajs-27eca87a.js";import{_ as P}from"./EditSection-4f5e7477.js";import{_ as R}from"./sortablejs-vue3-78a6c49c.js";import{e as f,Z as D,g as Y,o as p,c as L,V as r,J as i,M as e,I as h,a as n,P as k,O as I,K as x,A as Z,B as N,Q as T,Y as q,L as M}from"./@vue-588772e2.js";import{_ as E}from"./FormField-dc7910ae.js";import{g as d,_ as O}from"./app-90a7b2da.js";import{_ as U}from"./FormWithLabelField-e8758755.js";import{_ as z}from"./StepsComponent-41615805.js";import{_ as G}from"./ShowMediaComponent-a404520c.js";const W={class:"rtl:flex-row-reverse",draggable:"true"},X={"data-label":"#"},ee=["data-label"],te=["data-label","innerHTML"],oe={class:"flex"},se=["alt","src"],ae=["data-label"],re=["data-label"],he={__name:"SectionsList",props:{sections:Object,pageId:Number},setup(V){const y=V;let _=f(!1),u=f(!1),s=f({}),v=f(null);D("showEditSection",_),D("actionConfirm",u);let c=y.sections.map((t,m)=>({id:t.id,title:t.title,content:t.content,page_id:t.page_id,image:{url:t.image.url},created_at:t.created_at})),b=Y(c);j().props.locales;function S(t){s.value=y.sections.find(m=>m.id===t.id),_.value=!0}function $(t){u.value=!0,v=t.id}function l(){C.delete(route("dashboard.sections.destroy",v),{preserveState:t=>Object.keys(t.props.errors).length,preserveScroll:!0})}function o(t,m,a){if(m!==a){const w=t.splice(m,1)[0];t.splice(a,0,w),C.post(route("dashboard.sections.sort"),{sections:t},{preserveState:!0})}}function g(t){C.visit(route("dashboard.sections.show",t))}return(t,m)=>(p(),L(x,null,[r(J,{"has-table":""},{default:i(()=>[r(Q,{headers:["#",t.__("title"),t.__("content"),t.__("the_image"),t.__("created_at")],"is-draggable":""},{default:i(()=>[Object.keys(e(b)).length?(p(),h(e(R),{key:0,list:e(b),class:"rtl:flex-row-reverse","item-key":"id",tag:"tbody",onEnd:m[0]||(m[0]=a=>o(e(b),a.oldIndex,a.newIndex))},{item:i(({element:a,index:w})=>[n("tr",W,[n("td",X,k(w+1),1),n("td",{"data-label":t.__("title")},k(a.title),9,ee),n("td",{"data-label":t.__("content"),class:"prose bg-stone-50 text-start ps-2",innerHTML:a.content},null,8,te),n("td",oe,[n("img",{alt:a.title,src:a.image.url,class:"max-w-[200px] mx-auto"},null,8,se)]),n("td",{"data-label":t.__("created_at")},k(a.created_at),9,ae),n("td",{"data-label":t.__("options")},[r(H,{model:"sections",onDestroy:B=>$(a),onEdit:B=>S(a),onShow:B=>g(a)},null,8,["onDestroy","onEdit","onShow"])],8,re)])]),_:1},8,["list"])):I("",!0)]),_:1},8,["headers"])]),_:1}),e(_)?(p(),h(P,{key:0,section:e(s),"is-modal":""},null,8,["section"])):I("",!0),r(A,{onConfirm:l})],64))}},ye={__name:"CreateSection",props:{page:Object},setup(V){const y=V;let _=j().props.locales,u=Z("showCreateSection"),s=K({title:{},content:{},type:null,page_id:y.page.id,image:null}),v=f([d("main_data"),d("media")]),c=f(0),b=j().props.section_types;function S(){s.post(route("dashboard.sections.store"),{preserveScroll:!0,preserveState:$=>Object.keys($.props.errors).length,onSuccess:()=>{u.value=!1}})}return($,l)=>(p(),h(F,{"button-label":e(d)("create"),"has-cancel":!0,hasErrors:e(s).hasErrors,"is-form":!0,"model-value":e(u),title:e(d)("create_field",{field:"section"}),onCancel:l[3]||(l[3]=o=>N(u)?u.value=!1:u=!1),onConfirm:S},{default:i(()=>[r(z,{modelValue:e(c),"onUpdate:modelValue":l[0]||(l[0]=o=>N(c)?c.value=o:c=o),steps:e(v)},null,8,["modelValue","steps"]),T(n("section",null,[r(U,{label:e(d)("title")},{default:i(()=>[(p(!0),L(x,null,M(e(_),o=>(p(),h(E,{errors:e(s).errors[`title.${o}`],label:e(d)(o)},{default:i(()=>[r(O,{modelValue:e(s).title[o],"onUpdate:modelValue":g=>e(s).title[o]=g,autocomplete:`title[${o}]`,name:`title[${o}]`,required:""},null,8,["modelValue","onUpdate:modelValue","autocomplete","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),r(U,{cols:{lg:1},label:e(d)("content")},{default:i(()=>[(p(!0),L(x,null,M(e(_),o=>(p(),h(E,{errors:e(s).errors[`content.${o}`],label:e(d)(o)},{default:i(()=>[r(O,{modelValue:e(s).content[o],"onUpdate:modelValue":g=>e(s).content[o]=g,autocomplete:`content[${o}]`,dir:o==="ar"?"rtl":"ltr",name:`content[${o}]`,required:"",type:"editor"},null,8,["modelValue","onUpdate:modelValue","autocomplete","dir","name"])]),_:2},1032,["errors","label"]))),256))]),_:1},8,["label"]),r(U,{label:e(d)("type")},{default:i(()=>[r(E,{errors:e(s).errors.type},{default:i(()=>[r(O,{modelValue:e(s).type,"onUpdate:modelValue":l[1]||(l[1]=o=>e(s).type=o),autocomplete:"type",name:"type",type:"select",options:e(b),required:""},null,8,["modelValue","options"])]),_:1},8,["errors"])]),_:1},8,["label"])],512),[[q,e(c)===0]]),T(n("section",null,[r(G,{modelValue:e(s).image,"onUpdate:modelValue":l[2]||(l[2]=o=>e(s).image=o),name:"image"},null,8,["modelValue"])],512),[[q,e(c)===1]])]),_:1},8,["button-label","hasErrors","model-value","title"]))}};export{ye as _,he as a};
